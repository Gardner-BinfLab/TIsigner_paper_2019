<?php//Error Checksrequire_once "Controllers/CodonOpt_Controller_Ancestor_User_Job.php";if ( isset($SVGmaker) ) {		//If SVG controller is found	if ( 						//If Controller is SVG maker		get_class ($SVGmaker) == "CodonOpt_SVGmaker_Pareto" 	) {		if ( 					//If NOT supposed to show SVG			count( $SVGmaker->getAxisList() ) < 2		) {				header( "Location: ".CodonOpt_Controller_Ancestor_User_Job::getSubmitNewJobPage() );			exit;				//Redirect back to submit new job				}	} else {					//Otherwise Controller is not SVG maker		header( "Location: ".CodonOpt_Controller_Ancestor_User_Job::getSubmitNewJobPage() );		exit;					//Redirect back to submit new job	}} else {						//Otherwise no controller found	header( "Location: ".CodonOpt_Controller_Ancestor_User_Job::getSubmitNewJobPage() );	exit;						//Redirect back to submit new job}//Extract parameters$ChartColumnList = $SVGmaker->getColumnList();$XaxisCode = null;$YaxisCode = null;$ColorCode = $SVGmaker->getDefaultColorCode();			//Default value determined by controller$ShowHideOriginal = false;								//Default value is hide{	//Other Parameters as Get submission	$AxisList = $SVGmaker->getAxisList();	$XaxisCode = $AxisList[0];							//Default value (first 2 plottable axis)	$YaxisCode = $AxisList[1];	$ColumnCount = count( $ChartColumnList );	foreach($_GET as $tempKey => $tempValue) {			//Go through GET items		switch ($tempKey) {				case "x_axis_code":							//Find the X ID				if ( $tempValue < $ColumnCount ) {		//Check that it is valid					foreach ($AxisList as $ValidAxis) {	//Go through axis list						if ($tempValue == $ValidAxis) {	//If this is valid axis							$XaxisCode = $tempValue;	//Store it						}					}				}				break;			case "y_axis_code":							//Find the Y ID				if ( $tempValue < $ColumnCount ) {		//Check that it is valid					foreach ($AxisList as $ValidAxis) {	//Go through axis list						if ($tempValue == $ValidAxis) {	//If this is valid axis											$YaxisCode = $tempValue;	//Store it						}					}											}				break;			case "color_code":				if ($tempValue == "ignore") {			//If it is Ignore					$ColorCode = null;					//Set Color Code to null				} elseif ($tempValue<$ColumnCount) {	//Check that it is valid					$ColorCode = $tempValue;			//Store it				}				break;							case "showhide_original":					//Find show/hide Original Nucleotide Input				$ShowHideOriginal = (bool)$tempValue;				break;		}	}}?><span class="ShowIfNoSVG"><div class="ErrorMessage">Your browser does not support SVG. To view the Host Vs Optimized Codon Relative Frequency Chart, please switch to a browser with SVG.</div></span><?php 	//This uses native SVG and should work for everything else.	echo $SVGmaker->GenerateSVGForHeaderIntegers($XaxisCode,$YaxisCode,$ColorCode,$ShowHideOriginal);?>	<br/><br/><div id="results_form_div">	<form method="get" action="viewresult.php">		<input type="hidden" name="<?php echo $myController::getEncryptIDGetKey(); ?>" value="<?php echo $myController->getEncryptID(); ?>" />		<table>			<tr>				<td>Y-axis:</td>				<td><select name="y_axis_code">				<?php				foreach ($ChartColumnList as $Code=>$ColumnObject) {					if ( $ColumnObject->getPlot_XY_Axis() ) {	//If this is XY axis						echo "<option value='".$Code."'";						if ($Code == $YaxisCode) {							echo " selected ";						}						echo ">".$ColumnObject->getChartTitle()."</option>";					}				}				?> </select></td>				<td>&nbsp;&nbsp;&nbsp;</td>						<td>X-axis:</td>				<td><select name="x_axis_code">				<?php				foreach ($ChartColumnList as $Code=>$ColumnObject) {					if ( $ColumnObject->getPlot_XY_Axis() ) {	//If this is XY axis						echo "<option value='".$Code."'";						if ($Code == $XaxisCode) {							echo " selected ";						}						echo ">".$ColumnObject->getChartTitle()."</option>";					}				}				?></select></td>				<td>&nbsp;&nbsp;&nbsp;</td>				<td>Color Gradient:</td>				<td><select name="color_code">				<option value="ignore">- Ignore -</option>				<?php				foreach ($ChartColumnList as $Code=>$ColumnObject) {					echo "<option value='".$Code."'";					if ( isset($ColorCode) ) {		//If NOT ignore						if ($Code == $ColorCode) {	//Compare against code							echo " selected ";		//Select if this is the code						}					}					echo ">".$ColumnObject->getChartTitle()."</option>";				}				?></select></td>							</tr>			<tr>				<td>&nbsp;</td>			</tr>			<tr>				<td colspan='6'>					<?php						if ( $myController->getIsThereOriginalNucleotideInput() ) {		//If there is original nucleotide input							echo "Initial Nucleotide Input: ";							echo "<select name='showhide_original'>";							echo "<option value='0'";							if (!$ShowHideOriginal) {								echo " selected ";							}							echo ">Hide</option>";							echo "<option value='1'";							if ($ShowHideOriginal) {								echo " selected ";							}							echo ">Show</option>";							echo '</select>';						}					?>				</td>				<td></td>				<td class='right'><input type="submit" value="Redraw Graph" class="minimalstylebutton" /></td>			</tr>		</table>	</form></div><br/><?php/*	//Old Version: Flash Fallback if no SVGExplanation of display cascade:-If there is SVG and JavaScript (Chrome with JavaScript enabled)	-results_svg_div is shown	-results_form_div is shown	-blank.svg hidden by object	-If there is SVG with no JavaScript (Chrome with JavaScript disabled)	-results_svg_div is shown	-results_form_div is shown	-blank.svg hidden by object	-If there is no SVG but JavaScript (e.g. IE8 with JavaScript)	-results_svg_div will be hidden	-results_form_div is shown	-blank.svg shown by object		-object_nested_error_message is hidden		-SVGweb converts SVG into Flash	If there is no SVG AND no JavaScript (e.g. IE8 with JavaScript disabled)	-results_svg_div will be shown	-results_form_div is shown	-blank.svg shown by object		-object_nested_error_message remains unchanged (is shown)		-SVGweb not run and therefore hiddenImportant: The Internet Explorer Solution is imperfect. Sometimes it does not render at all, due to there being too many elements. (You can diagnose this but trying to get it to render a graph with fewer points. You could also reduce the number of elements by "ignoring" the Colour Coding, which removes the 256 element color gradient).*//*	//Old Version: Flash Fallback if no SVG//Unfortunately, this caused the page to jump to the middle/end in Chrome<object data='blank.svg' height="0" width="0" id="object_nested_SVGweb_flash">	<span id="svg_object_nested_span">&nbsp;</span><br/>	<script type="image/svg+xml">		<?php 			//This one uses SVGweb to convert SVG to flash, and should work for IE 8 and older			echo $SVGmaker->GenerateSVGForHeaderIntegers($XaxisCode,$YaxisCode,$ColorCode,$ShowHideOriginal);		?>	</script>	<br/></object><object data='blank.svg' height="0" width="0" id="object_nested_error_message">	<?php //This must be placed AFTER the SVGweb Flash converter to work for some unknown reason ?>	<div class="ErrorMessage">Your browser does not support both SVG and JavaScript. To view the Pareto Optimal Solutions Graph, please switch to a browser with either SVG or JavaScript.</div>	<br/></object><div id="results_svg_div">	<?php 		//This uses native SVG and should work for everything else.		echo $SVGmaker->GenerateSVGForHeaderIntegers($XaxisCode,$YaxisCode,$ColorCode,$ShowHideOriginal);	?>		</div>*/?>